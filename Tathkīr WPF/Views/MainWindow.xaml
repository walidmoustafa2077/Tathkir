<Window x:Class="Tathkīr_WPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:local="clr-namespace:Tathkīr_WPF"
        mc:Ignorable="d"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Width="800"
        Height="520"
        MouseDown="Window_MouseDown">

    <Border CornerRadius="20"
            Background="#F5F5F5">

        <Grid>
            <!-- Main Content -->
            <Border CornerRadius="20"
                    Padding="16">
                <Grid>
                    <Grid>
                        <!-- Background Image -->
                        <Image Source="/Resources/Background.png"
                               Stretch="UniformToFill"
                               Opacity="0.2" />

                        <!-- Color Overlay -->
                        <Grid Background="#80F5F5F5"
                              Opacity="0.5" />
                    </Grid>
                    
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        
                        <!-- Header -->
                        <DockPanel Grid.Row="0"
                                   Margin="0,0,0,12">
                            <TextBlock Text="{x:Static local:Strings.Tathkir}"
                                       FontSize="24"
                                       FontWeight="Bold"
                                       Foreground="#333"
                                       VerticalAlignment="Center" />
                            <Button Content="X"
                                    Width="32"
                                    Height="32"
                                    HorizontalAlignment="Right"
                                    Margin="8,0,0,0"
                                    Padding="0"
                                    FontSize="18"
                                    FontWeight="Bold"
                                    Click="Close_Click"
                                    Style="{StaticResource MaterialDesignFlatButton}">
                            </Button>

                        </DockPanel>

                        <!-- Main Content -->
                        <TabControl Grid.Row="1"
                                    Background="Transparent"
                                    BorderThickness="0"
                                    SelectedItem="{Binding SelectedTap, Mode=TwoWay}"
                                    materialDesign:ColorZoneAssist.Mode="PrimaryLight">

                            <!-- Tab 1: Prayer Times -->
                            <TabItem Header="{x:Static local:Strings.Home}">
                                <!-- Dynamic Content -->
                                <ContentControl Margin="0 4"
                                                Content="{Binding CurrentContentControl}"
                                                Style="{DynamicResource MaterialDesignContentControl}" />
                            </TabItem>

                            <TabItem Header="{x:Static local:Strings.Prayer_Times}">
                                <!-- Dynamic Content -->
                                <ContentControl Margin="0 4"
                                                Content="{Binding CurrentContentControl}"
                                                Style="{DynamicResource MaterialDesignContentControl}" />
                            </TabItem>

                            <!-- Tab 1: Prayer Times -->
                            <TabItem Header="{x:Static local:Strings.Athkar}">
                                <!-- Dynamic Content -->
                                <ContentControl Margin="0 4"
                                                Content="{Binding CurrentContentControl}"
                                                Style="{DynamicResource MaterialDesignContentControl}" />
                            </TabItem>

                            <!-- Tab 1: Prayer Times -->
                            <TabItem Header="{x:Static local:Strings.Quran}">
                                <!-- Dynamic Content -->
                                <ContentControl Margin="0 4"
                                                Content="{Binding CurrentContentControl}"
                                                Style="{DynamicResource MaterialDesignContentControl}" />
                            </TabItem>

                            <!-- Tab 3: Settings -->
                            <TabItem Header="{x:Static local:Strings.Settings}">
                                <!-- Dynamic Content -->
                                <ContentControl Margin="0 4"
                                                Content="{Binding CurrentContentControl}"
                                                Style="{DynamicResource MaterialDesignContentControl}" />
                            </TabItem>

                        </TabControl>
                    </Grid>
                </Grid>
            </Border>

            <Grid Visibility="{Binding IsDialogOpen, Converter={StaticResource BoolToVisibilityConverter}}">
                <!-- Dialog Overlay -->
                <Border  CornerRadius="20"
                         Background="Black"
                         Opacity="0.3"
                         HorizontalAlignment="Stretch"
                         VerticalAlignment="Stretch"
                         Panel.ZIndex="98" />

                <ContentControl Content="{Binding DialogControl}"
                                Style="{DynamicResource MaterialDesignContentControl}"
                                VerticalAlignment="Center"
                                HorizontalAlignment="Center"
                                Panel.ZIndex="99" />

            </Grid>
        </Grid>
    </Border>
</Window>
